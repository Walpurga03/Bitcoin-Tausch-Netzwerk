<!DOCTYPE html>
<html>
<head>
    <title>Valid nsec Generator</title>
    <script src="https://unpkg.com/nostr-tools/lib/nostr.bundle.js"></script>
</head>
<body>
    <h3>ğŸ”‘ Generate Valid Demo nsec/npub</h3>
    <button onclick="generateValidKeys()">Generate Valid Keys</button>
    <div id="result"></div>
    
    <script>
        function generateValidKeys() {
            try {
                console.log('ğŸ”„ Generating new valid keys...');
                
                // Generate a proper private key
                const privateKey = window.NostrTools.generatePrivateKey();
                console.log('Generated private key (hex):', privateKey);
                
                // Encode to nsec
                const nsec = window.NostrTools.nip19.nsecEncode(privateKey);
                console.log('Generated nsec:', nsec);
                
                // Get public key and encode to npub
                const publicKey = window.NostrTools.getPublicKey(privateKey);
                const npub = window.NostrTools.nip19.npubEncode(publicKey);
                console.log('Generated npub:', npub);
                
                // Verify by decoding
                const decodedNsec = window.NostrTools.nip19.decode(nsec);
                const decodedNpub = window.NostrTools.nip19.decode(npub);
                console.log('âœ… Verification successful!');
                
                document.getElementById('result').innerHTML = `
                    <h4>âœ… Valid Demo Keys Generated:</h4>
                    <p><strong>nsec:</strong><br><code>${nsec}</code></p>
                    <p><strong>npub:</strong><br><code>${npub}</code></p>
                    <p><strong>Private Key (hex):</strong><br><code>${privateKey}</code></p>
                    <p><strong>Public Key (hex):</strong><br><code>${publicKey}</code></p>
                    
                    <h4>ğŸ”§ For config.js:</h4>
                    <textarea style="width:100%; height:60px;">'${npub}',  // Valid Demo User</textarea>
                    
                    <h4>ğŸ“ For start.html demo:</h4>
                    <textarea style="width:100%; height:60px;">${nsec}</textarea>
                `;
                
            } catch (error) {
                console.error('âŒ Error generating keys:', error);
                document.getElementById('result').innerHTML = '<p style="color:red;">Error: ' + error.message + '</p>';
            }
        }
        
        // Auto-generate on load
        window.onload = () => generateValidKeys();
    </script>
</body>
</html>
